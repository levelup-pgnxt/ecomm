use('ecomm');

const produto = db.products.findOneAndUpdate({
    nome: 'Galaxy Tab S8',
    estoque: { $gt: 0 }
}, {
    $inc: {
        estoque: -1
    }
}, {
    projection: {
        nome: 1,
        precoUnitario: 1
    }
});

use('ecomm-account');

db.users.updateOne({
    nome: 'Renato Mantovani'
}, {
    $push: {
        'carrinho.produtos': produto
    }
});
